<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="student_admission_view_tree">
            <field name="name">student.admission.list</field>
            <field name="model">student.admission</field>
            <field name="type">list</field>
            <field name="arch" type="xml">
                <list string="Student Admissions">
                    <field name="name"/>
                    <field name="student_id"/>
                    <field name="mobile"/>
                    <field name="email"/>
                    <field name="sport_id"/>
                    <field name="level_id"/>
                    <field name="trainer_id"/>
                    <field name="state" widget="badge" decoration-warning="state == 'enrolled'" decoration-primary="state == 'new'" decoration-success="state == 'student'"/>
                </list>
            </field>
        </record>

        <record id="student_admission_view_form" model="ir.ui.view">
            <field name="name">student.admission.view.form</field>
            <field name="model">student.admission</field>
            <field name="arch" type="xml">
                <form string="Student">
                    <header>
                        <button string="Enroll" name="action_enroll"  invisible="state != 'new'" type="object" class="oe_highlight"/>
                        <button string="Make a student" name="action_make_student"  invisible="state != 'enrolled'" type="object" class="oe_highlight"/>
                        <button string="Cancel" name="action_cancel" type="object" invisible="state in ['cancel', 'student']"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button type="object" name="action_view_invoice" class="oe_stat_button" icon="fa-pencil-square-o" invisible ="is_invoiced == False">
                                <field name='is_invoiced' invisible="1"/>
                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_text">Invoice</span>
                                </div>
                            </button>
                        </div>
                        <div class="oe_title">
                            <label for="name"/>
                            <h1>
                                <field name="name" class="oe_inline"/>
                            </h1>
                        </div>
                        <group>
                            <group string="Personal Details">
                                <field name="student_id" widget="res_partner_many2one" readonly="state in ['cancel', 'student']" context="{'res_partner_search_mode': 'customer', 'show_address': 1, 'show_vat': True, 'default_is_student': False}" options='{"always_reload": True}'/>
                                <field name="mobile" widget="phone" required="1" readonly="state in ['cancel', 'student']"/>
                                <field name="email" widget="email" required="1"/>
                                <field name="p_name" invisible="check_parent == True"/>
                                <field name="parent_mobile" widget="phone" invisible="check_parent == True"/>
                                <field name="p1_name" invisible="check_parent == False"/>
                                <field name="parent1_mobile" widget="phone" invisible="check_parent == False"/>
                                <field name="check_parent" invisible="1"/>
                                <field name="check_register" invisible="1" readonly="1"/>
                            </group>
                            <group string="Sport Activity Details">
                                <field name="sport_id" options="{'no_create_edit': True, 'no_create': True}" readonly="state in ['cancel', 'student']"/>
                                <field name="level_id" options="{'no_create_edit': True, 'no_create': True}" readonly="state in ['cancel', 'student']"/>
                                <field name="trainer_id" options="{'no_create_edit': True, 'no_create': True}" required= "state == 'enrolled'" readonly="state in ['cancel', 'student']"/>
                                <field name="duration" required= "state == 'enrolled'" readonly="state in ['cancel', 'student']"/>
                            </group>
                            <group name="disability" string="Disability">
                                <field name="is_disability"/>
                            </group>
                        </group>
                        <field name="disability_description" placeholder="Describe disability..." invisible="is_disability == False"/>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="action_student_admission" model="ir.actions.act_window">
            <field name="name">Student Admission</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">student.admission</field>
            <field name="view_mode">list,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to add a new Student.
                </p>
            </field>
        </record>

        <record id="action_partner_student" model="ir.actions.act_window">
            <field name="name">Student</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">kanban,list,form</field>
           <field name="domain">[('is_student', '=', True)]</field>
            <field name="context">{'default_is_student': True}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to add a new Student.
                </p>
            </field>
        </record>

        <record id="action_sport_product_equipment" model="ir.actions.act_window">
            <field name="name">Equipments</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_mode">kanban,list,form</field>
            <field name="domain">[('is_equipment', '=', True)]</field>
            <field name="context">{'default_is_equipment': True, 'default_detailed_type': 'product'}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to add a new Sports equipments.
                </p>
            </field>
        </record>

        <record id="action_partner_trainer" model="ir.actions.act_window">
            <field name="name">Coach</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">kanban,list,form</field>
            <field name="domain">[('is_coach', '=', True)]</field>
            <field name="context">{'default_is_coach': True}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to add a new Coach.
                </p>
            </field>
        </record>

        <menuitem id="student_admission_main_menu" name="Sports Management Center" sequence="20" web_icon="bi_sport_center_management,static/description/icon.png">
            <menuitem id="student_admission_menu" name="Admission" sequence="20">
                <menuitem id="admission_student_menu" name="Registrations" sequence="10" action="action_student_admission"/>
            </menuitem>
            <menuitem id="student_admission_menu" name="Admission" sequence="30">
                <menuitem id="partner_student_menu_sub" name="Students" sequence="20" action="action_partner_student"/>
            </menuitem>
            <menuitem id="student_sport_menu" name="Sports" sequence="40">
                <menuitem id="sport_trainer_menu" name="Coach" sequence="10" action="action_partner_trainer"/>
                <menuitem id="sport_product_equipment_menu" name="Sports Equipments" sequence="1" action="action_sport_product_equipment"/>
            </menuitem>
        </menuitem>
    </data>
</odoo>